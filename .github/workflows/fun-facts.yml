name: Fun Facts Generator

on:
  schedule:
    - cron: "0 12 * * *" # Daily at noon
  workflow_dispatch:

jobs:
  update-fun-facts:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: "3.9"

      - name: Install dependencies
        run: |
          pip install requests beautifulsoup4

      - name: Generate Fun Facts
        run: |
          python3 << 'EOF'
          import requests
          import json
          import random
          from datetime import datetime

          # Fun programming facts
          facts = [
              "🐍 Python was named after Monty Python's Flying Circus!",
              "🔧 The first computer bug was an actual bug found in a computer in 1947!",
              "⌨️ The QWERTY keyboard was designed to slow down typing to prevent typewriter jams!",
              "🖥️ The first computer programmer was Ada Lovelace in 1843!",
              "📱 There are more possible games of chess than atoms in the observable universe!",
              "🌐 The first website is still online: info.cern.ch",
              "💾 1 GB of storage in 1981 would have cost $300,000!",
              "🎮 The first video game was created in 1958 and was called 'Tennis for Two'!"
          ]

          # Get a random fact
          daily_fact = random.choice(facts)

          # Create a JSON with today's fact
          fact_data = {
              "date": datetime.now().strftime("%Y-%m-%d"),
              "fact": daily_fact
          }

          with open('daily_fact.json', 'w') as f:
              json.dump(fact_data, f)
              
          print(f"Today's fun fact: {daily_fact}")
          EOF

      - name: Commit changes
        run: |
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action"
          git add daily_fact.json
          git diff --quiet && git diff --staged --quiet || git commit -m "🎲 Update daily fun fact"
          git push
